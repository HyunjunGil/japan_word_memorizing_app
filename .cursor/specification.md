# ì¼ë³¸ì–´ ë‹¨ì–´ì¥ - ê¸°ìˆ  ì‚¬ì–‘ì„œ

## ğŸ“‹ ë¬¸ì„œ ê°œìš”

ì´ ë¬¸ì„œëŠ” ì¼ë³¸ì–´ ë‹¨ì–´ì¥ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒì„¸í•œ ê¸°ìˆ  ì‚¬ì–‘, ì•„í‚¤í…ì²˜ ì„¤ê³„, API ëª…ì„¸ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.

**ì‘ì„±ì¼**: 2025-12-06  
**ë²„ì „**: 2.0.0  
**ìƒíƒœ**: ë¦¬íŒ©í† ë§ ì™„ë£Œ

---

## ğŸ— ì•„í‚¤í…ì²˜ ì„¤ê³„

### ì „ì²´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      App (main.js)                      â”‚
â”‚                   ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       App.js                            â”‚
â”‚               ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ í´ë˜ìŠ¤                        â”‚
â”‚            (ëª¨ë“  ëª¨ë“ˆì„ í†µí•©í•˜ê³  ì´ë²¤íŠ¸ ì¡°ì •)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚                   â”‚
        â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Services   â”‚   â”‚   Managers   â”‚   â”‚     Modes    â”‚
â”‚              â”‚   â”‚              â”‚   â”‚              â”‚
â”‚ - WordSet    â”‚   â”‚ - Session    â”‚   â”‚ - QuizMode   â”‚
â”‚ - Weight     â”‚   â”‚ - History    â”‚   â”‚ - StudyMode  â”‚
â”‚ - Statistics â”‚   â”‚ - Voice      â”‚   â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      UI      â”‚
                    â”‚              â”‚
                    â”‚ - FileSelect â”‚
                    â”‚ - Flashcard  â”‚
                    â”‚ - StudyTable â”‚
                    â”‚ - Statistics â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    Models    â”‚
                    â”‚              â”‚
                    â”‚ - Word       â”‚
                    â”‚ - WordSet    â”‚
                    â”‚ - Question   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë ˆì´ì–´ êµ¬ì¡°

1. **Presentation Layer (UI)**
   - ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ë Œë”ë§
   - ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬
   - ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ê´€ë¦¬

2. **Business Logic Layer (Modes + Services)**
   - í•™ìŠµ ëª¨ë“œ ë¡œì§ (í‰ê°€í•˜ê¸°/ê³µë¶€í•˜ê¸°)
   - ê°€ì¤‘ì¹˜ ê³„ì‚°
   - í†µê³„ ë¶„ì„

3. **Data Layer (Models + Services)**
   - ë°ì´í„° êµ¬ì¡° ì •ì˜
   - ë°ì´í„° ë¡œë“œ ë° ê´€ë¦¬
   - ìƒíƒœ ì €ì¥/ë³µì›

4. **Utility Layer**
   - ê³µí†µ í—¬í¼ í•¨ìˆ˜
   - DOM ì¡°ì‘
   - í´ë¦½ë³´ë“œ ì²˜ë¦¬

---

## ğŸ“¦ ëª¨ë“ˆ ëª…ì„¸

### 1. Config (config.js)

ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì—­ ìƒìˆ˜ ì •ì˜

```javascript
export const CONFIG = {
  WEIGHTS: {
    MIN_QUIZ: 0,      // í‰ê°€í•˜ê¸° ìµœì†Œ ê°€ì¤‘ì¹˜
    MAX: 5,           // ìµœëŒ€ ê°€ì¤‘ì¹˜
    MIN_STUDY: 1,     // ê³µë¶€í•˜ê¸° ìµœì†Œ ê°€ì¤‘ì¹˜
    DEFAULT: 1        // ê¸°ë³¸ ê°€ì¤‘ì¹˜
  },
  
  TIMING: {
    LONG_PRESS: 500,  // ê¸´ ëˆ„ë¦„ ê°ì§€ ì‹œê°„ (ms)
    CLICK_DELAY: 100  // í´ë¦­ ì§€ì—° ì‹œê°„ (ms)
  },
  
  FILES: {
    MAX_PAGE: 99,     // ìµœëŒ€ page íŒŒì¼ ë²ˆí˜¸
    MAX_GRAMMAR: 99   // ìµœëŒ€ grammar íŒŒì¼ ë²ˆí˜¸
  },
  
  MODES: {
    QUIZ: 'quiz',     // í‰ê°€í•˜ê¸° ëª¨ë“œ
    STUDY: 'study'    // ê³µë¶€í•˜ê¸° ëª¨ë“œ
  },
  
  SORT_ORDERS: {
    ASC: 'asc',       // ì˜¤ë¦„ì°¨ìˆœ
    DESC: 'desc',     // ë‚´ë¦¼ì°¨ìˆœ
    RANDOM: 'random'  // ëœë¤
  },
  
  BUTTON_ALIGNMENT: {
    LEFT: 'left',
    CENTER: 'center',
    RIGHT: 'right'
  },
  
  QUESTION_TYPES: {
    JAPANESE: 'japanese',
    MEANING: 'meaning',
    PRONUNCIATION: 'pronunciation'
  },
  
  RECENT_WORD_EXCLUSION_COUNT: 5,  // ìµœê·¼ ë‹¨ì–´ ì œì™¸ ê°œìˆ˜
  
  SPEECH: {
    LANG: 'ja-JP',
    RATE: 0.9,
    PITCH: 1
  },
  
  FEEDBACK: {
    DISPLAY_DURATION: 1500
  }
};
```

---

### 2. Models

#### 2.1 Word (models/Word.js)

ë‹¨ì–´ ë°ì´í„° ëª¨ë¸

**ì†ì„±**:
- `id`: number - ê³ ìœ  ì‹ë³„ì
- `japanese`: string - ì¼ë³¸ì–´ í‘œê¸°
- `pronunciation`: string - ë°œìŒ
- `meaning`: string - í•œêµ­ì–´ ì˜ë¯¸
- `sent_jp`: string - ì¼ë³¸ì–´ ì˜ˆë¬¸ (optional)
- `sent_kr`: string - í•œêµ­ì–´ ì˜ˆë¬¸ (optional)
- `fileName`: string - ì¶œì²˜ íŒŒì¼ëª…

**ë©”ì„œë“œ**:
```javascript
hasSentence(): boolean
  // ì˜ˆë¬¸ ì¡´ì¬ ì—¬ë¶€ í™•ì¸

getTextToSpeak(): string
  // ë°œìŒ ì¬ìƒìš© í…ìŠ¤íŠ¸ ë°˜í™˜ (ì¼ë³¸ì–´ ë˜ëŠ” ë°œìŒ)
```

#### 2.2 WordSet (models/WordSet.js)

ë‹¨ì–´ ì„¸íŠ¸ ëª¨ë¸

**ì†ì„±**:
- `fileName`: string - íŒŒì¼ëª…
- `words`: Word[] - ë‹¨ì–´ ë°°ì—´

**ë©”ì„œë“œ**:
```javascript
getWord(id: number): Word | undefined
  // IDë¡œ ë‹¨ì–´ ì°¾ê¸°

getWordCount(): number
  // ë‹¨ì–´ ê°œìˆ˜ ë°˜í™˜
```

#### 2.3 Question (models/Question.js)

ë¬¸ì œ ëª¨ë¸

**ì†ì„±**:
- `type`: string - ë¬¸ì œ ìœ í˜• (japanese/meaning)
- `word`: Word - ë‹¨ì–´ ê°ì²´
- `weightKey`: string - ê°€ì¤‘ì¹˜ í‚¤

**ë©”ì„œë“œ**:
```javascript
getQuestion(): string
  // ë¬¸ì œ í…ìŠ¤íŠ¸ ë°˜í™˜

getAnswer(): object
  // ì •ë‹µ ê°ì²´ ë°˜í™˜ { japanese, pronunciation, meaning }
```

---

### 3. Services

#### 3.1 WordSetService (services/WordSetService.js)

ë‹¨ì–´ì…‹ ë¡œë“œ ë° ê´€ë¦¬ ì„œë¹„ìŠ¤

**ë©”ì„œë“œ**:
```javascript
async loadWordSets(fileNames: string[]): Promise<WordSet[]>
  // íŒŒì¼ëª… ë°°ì—´ë¡œë¶€í„° ë‹¨ì–´ì…‹ ë¡œë“œ
  // @param fileNames - ë¡œë“œí•  íŒŒì¼ëª… ë°°ì—´
  // @returns ë¡œë“œëœ WordSet ë°°ì—´
  // @throws íŒŒì¼ ë¡œë“œ ì‹¤íŒ¨ ì‹œ ì—ëŸ¬

getAvailableFiles(type: 'page'|'grammar', maxCount: number): Promise<string[]>
  // ì‚¬ìš© ê°€ëŠ¥í•œ íŒŒì¼ ëª©ë¡ ì¡°íšŒ
  // @param type - íŒŒì¼ ìœ í˜•
  // @param maxCount - ìµœëŒ€ íŒŒì¼ ê°œìˆ˜
  // @returns ì¡´ì¬í•˜ëŠ” íŒŒì¼ëª… ë°°ì—´
```

**êµ¬í˜„ ì„¸ë¶€ì‚¬í•­**:
- `fetch` API ì‚¬ìš©í•˜ì—¬ JSON íŒŒì¼ ë¡œë“œ
- íŒŒì¼ë³„ë¡œ Word ê°ì²´ ìƒì„±
- ì—ëŸ¬ ì²˜ë¦¬ ë° ë¡œê·¸

#### 3.2 WeightService (services/WeightService.js)

ê°€ì¤‘ì¹˜ ê´€ë¦¬ ì„œë¹„ìŠ¤

**ë©”ì„œë“œ**:
```javascript
initializeWeights(questions: Question[]): void
  // ë¬¸ì œ ë°°ì—´ì˜ ê°€ì¤‘ì¹˜ ì´ˆê¸°í™”

getWeight(weightKey: string): number
  // ê°€ì¤‘ì¹˜ ì¡°íšŒ

increaseWeight(weightKey: string): void
  // ì˜¤ë‹µ ì‹œ ê°€ì¤‘ì¹˜ ì¦ê°€ (MAXê¹Œì§€)

decreaseWeight(weightKey: string, mode: string): void
  // ì •ë‹µ ì‹œ ê°€ì¤‘ì¹˜ ê°ì†Œ (MIN_QUIZ ë˜ëŠ” MIN_STUDYê¹Œì§€)

getTotalWeight(): number
  // ì „ì²´ ê°€ì¤‘ì¹˜ í•©ê³„ ë°˜í™˜

clear(): void
  // ëª¨ë“  ê°€ì¤‘ì¹˜ ì´ˆê¸°í™”
```

**ê°€ì¤‘ì¹˜ ë¡œì§**:
- ì •ë‹µ: weight - 1 (ìµœì†Œê°’ê¹Œì§€)
- ì˜¤ë‹µ: weight + 1 (ìµœëŒ€ê°’ 5ê¹Œì§€)
- í‰ê°€í•˜ê¸° ìµœì†Œê°’: 0
- ê³µë¶€í•˜ê¸° ìµœì†Œê°’: 1

#### 3.3 StatisticsService (services/StatisticsService.js)

í†µê³„ ê³„ì‚° ë° ê´€ë¦¬ ì„œë¹„ìŠ¤

**ë©”ì„œë“œ**:
```javascript
initializeTryCount(weightKey: string): void
  // íŠ¸ë¼ì´ íšŸìˆ˜ ì´ˆê¸°í™”

incrementTryCount(weightKey: string): number
  // íŠ¸ë¼ì´ íšŸìˆ˜ ì¦ê°€

recordCompletion(weightKey: string): void
  // ì™„ë£Œëœ ë¬¸ì œì˜ íŠ¸ë¼ì´ íšŸìˆ˜ ê¸°ë¡

getCompletedTryCount(weightKey: string): number|null
  // ì™„ë£Œëœ ë¬¸ì œì˜ íŠ¸ë¼ì´ íšŸìˆ˜ ì¡°íšŒ

calculateStatistics(questions: Question[]): object
  // í†µê³„ ê³„ì‚°
  // @returns {
  //   tryCountDistribution: {íšŸìˆ˜: ê°œìˆ˜},
  //   tryCountQuestions: {íšŸìˆ˜: [ë¬¸ì œ ë°°ì—´]},
  //   totalCompleted: number,
  //   totalQuestions: number,
  //   avgTryCount: number
  // }

groupStatisticsByTryCount(stats: object): array
  // íŠ¸ë¼ì´ íšŸìˆ˜ë³„ë¡œ ê·¸ë£¹í™”
  // @returns ê·¸ë£¹ ë°°ì—´ [{tryCount, label, count, percentage, barWidth, questions}]

clear(): void
  // ëª¨ë“  í†µê³„ ì´ˆê¸°í™”
```

**íŠ¸ë¼ì´ íšŸìˆ˜ ê³„ì‚°**:
- ì‹¤ì œ íŠ¸ë¼ì´ íšŸìˆ˜ëŠ” 1, 3, 5, 7... (í™€ìˆ˜)
- í‘œì‹œ íšŸìˆ˜ = Math.floor((ì‹¤ì œ íšŸìˆ˜ + 1) / 2)
  - 1íšŒ ì‹œë„ â†’ "1íšŒ" í‘œì‹œ
  - 3íšŒ ì‹œë„ â†’ "2íšŒ" í‘œì‹œ
  - 5íšŒ ì‹œë„ â†’ "3íšŒ" í‘œì‹œ
- 5íšŒ ì´ìƒì€ "3íšŒ+"ë¡œ í†µí•© í‘œì‹œ

---

### 4. Managers

#### 4.1 StudySessionManager (managers/StudySessionManager.js)

í•™ìŠµ ì„¸ì…˜ ìƒíƒœ ê´€ë¦¬

**ì†ì„±**:
- `isActive`: boolean - ì„¸ì…˜ í™œì„±í™” ìƒíƒœ
- `mode`: string - í˜„ì¬ ëª¨ë“œ (quiz/study)
- `selectedFiles`: string[] - ì„ íƒëœ íŒŒì¼
- `startTime`: Date - ì„¸ì…˜ ì‹œì‘ ì‹œê°„

**ë©”ì„œë“œ**:
```javascript
startSession(mode: string, files: string[]): void
  // ìƒˆ ì„¸ì…˜ ì‹œì‘

endSession(): void
  // ì„¸ì…˜ ì¢…ë£Œ

isSessionActive(): boolean
  // ì„¸ì…˜ í™œì„±í™” ì—¬ë¶€

getMode(): string
  // í˜„ì¬ ëª¨ë“œ ë°˜í™˜

getSessionDuration(): number
  // ì„¸ì…˜ ì§„í–‰ ì‹œê°„ (ms)
```

#### 4.2 HistoryManager (managers/HistoryManager.js)

ë‹¨ì–´ íˆìŠ¤í† ë¦¬ ê´€ë¦¬ (ì•ìœ¼ë¡œ/ë’¤ë¡œ ë„¤ë¹„ê²Œì´ì…˜)

**ë©”ì„œë“œ**:
```javascript
push(question: Question): void
  // íˆìŠ¤í† ë¦¬ì— ë¬¸ì œ ì¶”ê°€

canGoBack(): boolean
  // ë’¤ë¡œ ê°ˆ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸

canGoForward(): boolean
  // ì•ìœ¼ë¡œ ê°ˆ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸

goBack(): Question
  // ì´ì „ ë¬¸ì œë¡œ ì´ë™

goForward(): Question
  // ë‹¤ìŒ ë¬¸ì œë¡œ ì´ë™

getCurrentIndex(): number
  // í˜„ì¬ ì¸ë±ìŠ¤ ë°˜í™˜

clear(): void
  // íˆìŠ¤í† ë¦¬ ì´ˆê¸°í™”
```

**êµ¬í˜„ ì„¸ë¶€ì‚¬í•­**:
- ë°°ì—´ ê¸°ë°˜ íˆìŠ¤í† ë¦¬ ìŠ¤íƒ
- í˜„ì¬ ìœ„ì¹˜ ì¸ë±ìŠ¤ ê´€ë¦¬
- ì•ìœ¼ë¡œ/ë’¤ë¡œ ë„¤ë¹„ê²Œì´ì…˜ ì§€ì›

#### 4.3 VoiceManager (managers/VoiceManager.js)

Web Speech API ê´€ë¦¬

**ë©”ì„œë“œ**:
```javascript
async initialize(): Promise<void>
  // ì¼ë³¸ì–´ ìŒì„± ì´ˆê¸°í™”
  // Web Speech APIì˜ voices ë¡œë“œ ëŒ€ê¸°

play(text: string): void
  // í…ìŠ¤íŠ¸ ë°œìŒ ì¬ìƒ
  // @param text - ë°œìŒí•  ì¼ë³¸ì–´ í…ìŠ¤íŠ¸

isAvailable(): boolean
  // ìŒì„± ê¸°ëŠ¥ ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€
```

**êµ¬í˜„ ì„¸ë¶€ì‚¬í•­**:
- Web Speech APIì˜ SpeechSynthesis ì‚¬ìš©
- ì¼ë³¸ì–´ ìŒì„± (ja-JP) ìë™ ì„ íƒ
- ìŒì„±ì´ ì—†ì„ ê²½ìš° graceful fallback

---

### 5. Modes

#### 5.1 QuizMode (modes/QuizMode.js)

í‰ê°€í•˜ê¸° ëª¨ë“œ ë¡œì§

**ë©”ì„œë“œ**:
```javascript
initialize(wordSets: WordSet[], questionTypes: string[]): void
  // ëª¨ë“œ ì´ˆê¸°í™” ë° ë¬¸ì œ ìƒì„±
  // @param wordSets - ë‹¨ì–´ì…‹ ë°°ì—´
  // @param questionTypes - ë¬¸ì œ ìœ í˜• ë°°ì—´

selectNextQuestion(): Question
  // ë‹¤ìŒ ë¬¸ì œ ì„ íƒ (ê°€ì¤‘ì¹˜ ê¸°ë°˜ ëœë¤)
  // ìµœê·¼ 5ê°œ ë‹¨ì–´ ì¤‘ë³µ ë°©ì§€

getCurrentQuestion(): Question
  // í˜„ì¬ ë¬¸ì œ ë°˜í™˜

markCorrect(): void
  // ì •ë‹µ ì²˜ë¦¬ (ê°€ì¤‘ì¹˜ ê°ì†Œ, ì™„ë£Œ ê¸°ë¡)

markIncorrect(): void
  // ì˜¤ë‹µ ì²˜ë¦¬ (ê°€ì¤‘ì¹˜ ì¦ê°€, íŠ¸ë¼ì´ íšŸìˆ˜ ì¦ê°€)

goBack(): Question
  // ì´ì „ ë¬¸ì œë¡œ ì´ë™

canGoBack(): boolean
  // ë’¤ë¡œ ê°ˆ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸

getProgress(): object
  // ì§„í–‰ë¥  ë°˜í™˜ { completed, total }

calculateStatistics(): object
  // í†µê³„ ê³„ì‚°

groupStatistics(stats: object): array
  // í†µê³„ ê·¸ë£¹í™”

reset(): void
  // ëª¨ë“œ ì´ˆê¸°í™”
```

**ë¬¸ì œ ì„ íƒ ì•Œê³ ë¦¬ì¦˜**:
1. ê°€ì¤‘ì¹˜ í•©ê³„ ê³„ì‚°
2. 0 ~ í•©ê³„ ë²”ìœ„ì˜ ëœë¤ ê°’ ìƒì„±
3. ëˆ„ì  ê°€ì¤‘ì¹˜ë¡œ ë¬¸ì œ ì„ íƒ
4. ìµœê·¼ 5ê°œ ë‹¨ì–´ì— í¬í•¨ë˜ë©´ ì¬ì„ íƒ
5. íˆìŠ¤í† ë¦¬ì— ì¶”ê°€

#### 5.2 StudyMode (modes/StudyMode.js)

ê³µë¶€í•˜ê¸° ëª¨ë“œ ë¡œì§

**ë©”ì„œë“œ**:
```javascript
initialize(wordSets: WordSet[]): void
  // ëª¨ë“œ ì´ˆê¸°í™”

getWords(): Word[]
  // ëª¨ë“  ë‹¨ì–´ ë°˜í™˜

sortWords(order: 'asc'|'desc'): void
  // ID ê¸°ì¤€ ì •ë ¬

toggleSortOrder(): string
  // ì •ë ¬ ìˆœì„œ í† ê¸€ (asc â†” desc)

getCurrentSortOrder(): string
  // í˜„ì¬ ì •ë ¬ ìˆœì„œ ë°˜í™˜

reset(): void
  // ëª¨ë“œ ì´ˆê¸°í™”
```

---

### 6. UI Components

#### 6.1 FileSelectionUI (ui/FileSelectionUI.js)

íŒŒì¼ ì„ íƒ í™”ë©´ UI

**ë©”ì„œë“œ**:
```javascript
show(): void
  // í™”ë©´ í‘œì‹œ

hide(): void
  // í™”ë©´ ìˆ¨ê¹€

renderFiles(files: string[], wordCounts: object): void
  // íŒŒì¼ ëª©ë¡ ë Œë”ë§
  // @param files - íŒŒì¼ëª… ë°°ì—´
  // @param wordCounts - {fileName: count} ê°ì²´

getSelectedFiles(): string[]
  // ì„ íƒëœ íŒŒì¼ ë°˜í™˜

getSelectedMode(): string
  // ì„ íƒëœ ëª¨ë“œ ë°˜í™˜ (quiz/study)

getSelectedQuestionTypes(): string[]
  // ì„ íƒëœ ë¬¸ì œ ìœ í˜• ë°˜í™˜
```

#### 6.2 FlashcardUI (ui/FlashcardUI.js)

í”Œë˜ì‹œì¹´ë“œ í™”ë©´ UI

**ë©”ì„œë“œ**:
```javascript
show(): void
hide(): void

showQuestion(question: Question): void
  // ë¬¸ì œ í‘œì‹œ
  // @param question - í‘œì‹œí•  ë¬¸ì œ

showAnswer(answer: object): void
  // ì •ë‹µ í‘œì‹œ
  // @param answer - {japanese, pronunciation, meaning}

hideAnswer(): void
  // ì •ë‹µ ìˆ¨ê¹€

updateProgress(completed: number, total: number): void
  // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸

updateWeight(weight: number): void
  // ê°€ì¤‘ì¹˜ ë°°ì§€ ì—…ë°ì´íŠ¸

setButtonAlignment(alignment: 'left'|'center'|'right'): void
  // ë²„íŠ¼ ì •ë ¬ ì„¤ì •

toggleAlignmentMenu(): void
  // ì •ë ¬ ë©”ë‰´ í† ê¸€
```

#### 6.3 StudyTableUI (ui/StudyTableUI.js)

ê³µë¶€í•˜ê¸° í…Œì´ë¸” UI

**ë©”ì„œë“œ**:
```javascript
show(): void
hide(): void

render(words: Word[], sortOrder: string): void
  // í…Œì´ë¸” ë Œë”ë§
  // @param words - ë‹¨ì–´ ë°°ì—´
  // @param sortOrder - ì •ë ¬ ìˆœì„œ

toggleColumn(columnType: string): void
  // ì»¬ëŸ¼ ì „ì²´ í† ê¸€

toggleCell(cell: HTMLElement): void
  // ê°œë³„ ì…€ í† ê¸€
```

#### 6.4 StatisticsUI (ui/StatisticsUI.js)

í†µê³„ í™”ë©´ UI

**ë©”ì„œë“œ**:
```javascript
update(stats: object, groups: array, callbacks: object): void
  // í†µê³„ ì—…ë°ì´íŠ¸
  // @param stats - í†µê³„ ë°ì´í„°
  // @param groups - ê·¸ë£¹ ë°°ì—´
  // @param callbacks - ì´ë²¤íŠ¸ ì½œë°± ê°ì²´

toggleDetail(tryCount: number|string): void
  // ìƒì„¸ í…Œì´ë¸” í† ê¸€

createStatisticsItem(group: object): string
  // í†µê³„ í•­ëª© HTML ìƒì„±

createDetailTable(tryCount: number|string, questions: Question[]): string
  // ìƒì„¸ í…Œì´ë¸” HTML ìƒì„±
```

---

### 7. Utilities

#### 7.1 ClipboardUtils (utils/ClipboardUtils.js)

í´ë¦½ë³´ë“œ ë³µì‚¬ ìœ í‹¸ë¦¬í‹°

**ë©”ì„œë“œ**:
```javascript
startLongPress(element: HTMLElement, text: string): void
  // ê¸´ ëˆ„ë¦„ ì‹œì‘
  // 500ms í›„ í´ë¦½ë³´ë“œì— ë³µì‚¬

endLongPress(): void
  // ê¸´ ëˆ„ë¦„ ì¢…ë£Œ

setClickTimer(callback: Function): void
  // í´ë¦­ íƒ€ì´ë¨¸ ì„¤ì • (ê¸´ ëˆ„ë¦„ê³¼ êµ¬ë¶„)

isLongPressCompleted(): boolean
  // ê¸´ ëˆ„ë¦„ ì™„ë£Œ ì—¬ë¶€

resetLongPressFlag(): void
  // ê¸´ ëˆ„ë¦„ í”Œë˜ê·¸ ë¦¬ì…‹
```

#### 7.2 DOMUtils (utils/DOMUtils.js)

DOM ì¡°ì‘ í—¬í¼

**ë©”ì„œë“œ**:
```javascript
static getElement(id: string): HTMLElement|null
  // IDë¡œ ìš”ì†Œ ì°¾ê¸°

static toggleVisibility(element: HTMLElement, show: boolean): void
  // ìš”ì†Œ í‘œì‹œ/ìˆ¨ê¹€

static addClass(element: HTMLElement, className: string): void
  // í´ë˜ìŠ¤ ì¶”ê°€

static removeClass(element: HTMLElement, className: string): void
  // í´ë˜ìŠ¤ ì œê±°

static toggleClass(element: HTMLElement, className: string): void
  // í´ë˜ìŠ¤ í† ê¸€

static setHTML(element: HTMLElement, html: string): void
  // innerHTML ì„¤ì •

static setText(element: HTMLElement, text: string): void
  // textContent ì„¤ì •
```

#### 7.3 SortUtils (utils/SortUtils.js)

ì •ë ¬ ì•Œê³ ë¦¬ì¦˜

**ë©”ì„œë“œ**:
```javascript
static fisherYatesShuffle(array: any[]): any[]
  // Fisher-Yates ì…”í”Œ ì•Œê³ ë¦¬ì¦˜
  // ë°°ì—´ì„ ëœë¤í•˜ê²Œ ì„ìŒ
  // @param array - ì›ë³¸ ë°°ì—´ (ë³€ê²½ë¨)
  // @returns ì…”í”Œëœ ë°°ì—´

static sortById(array: object[], order: 'asc'|'desc'): object[]
  // ID ê¸°ì¤€ ì •ë ¬
  // @param array - {id: number} ì†ì„±ì„ ê°€ì§„ ê°ì²´ ë°°ì—´
  // @param order - ì •ë ¬ ìˆœì„œ
  // @returns ì •ë ¬ëœ ë°°ì—´
```

---

## ğŸ”„ ë°ì´í„° íë¦„

### í‰ê°€í•˜ê¸° ëª¨ë“œ íë¦„

```
1. ì‚¬ìš©ì ì…ë ¥
   â””â”€> FileSelectionUI.getSelectedFiles()
   â””â”€> FileSelectionUI.getSelectedMode() === 'quiz'
   â””â”€> FileSelectionUI.getSelectedQuestionTypes()

2. ì´ˆê¸°í™”
   â””â”€> WordSetService.loadWordSets(files)
   â””â”€> QuizMode.initialize(wordSets, questionTypes)
        â””â”€> WeightService.initializeWeights(questions)
        â””â”€> StatisticsService ì´ˆê¸°í™”

3. ë¬¸ì œ ì„ íƒ
   â””â”€> QuizMode.selectNextQuestion()
        â””â”€> WeightService.getTotalWeight()
        â””â”€> ê°€ì¤‘ì¹˜ ê¸°ë°˜ ëœë¤ ì„ íƒ
        â””â”€> ìµœê·¼ 5ê°œ ë‹¨ì–´ ì¤‘ë³µ í™•ì¸
        â””â”€> HistoryManager.push(question)
        â””â”€> StatisticsService.initializeTryCount(weightKey)

4. ë¬¸ì œ í‘œì‹œ
   â””â”€> FlashcardUI.showQuestion(question)
   â””â”€> FlashcardUI.updateProgress(completed, total)
   â””â”€> FlashcardUI.updateWeight(weight)

5. ì‚¬ìš©ì ë‹µë³€
   5a. ì •ë‹µ
       â””â”€> QuizMode.markCorrect()
            â””â”€> WeightService.decreaseWeight(weightKey)
            â””â”€> StatisticsService.recordCompletion(weightKey)
   
   5b. ì˜¤ë‹µ
       â””â”€> QuizMode.markIncorrect()
            â””â”€> WeightService.increaseWeight(weightKey)
            â””â”€> StatisticsService.incrementTryCount(weightKey)

6. í†µê³„ ì—…ë°ì´íŠ¸
   â””â”€> QuizMode.calculateStatistics()
   â””â”€> QuizMode.groupStatistics(stats)
   â””â”€> StatisticsUI.update(stats, groups)
```

### ê³µë¶€í•˜ê¸° ëª¨ë“œ íë¦„

```
1. ì‚¬ìš©ì ì…ë ¥
   â””â”€> FileSelectionUI.getSelectedFiles()
   â””â”€> FileSelectionUI.getSelectedMode() === 'study'

2. ì´ˆê¸°í™”
   â””â”€> WordSetService.loadWordSets(files)
   â””â”€> StudyMode.initialize(wordSets)

3. í…Œì´ë¸” ë Œë”ë§
   â””â”€> StudyMode.getWords()
   â””â”€> StudyTableUI.render(words, sortOrder)

4. ì‚¬ìš©ì ìƒí˜¸ì‘ìš©
   4a. ì •ë ¬
       â””â”€> StudyMode.toggleSortOrder()
       â””â”€> StudyMode.sortWords(order)
       â””â”€> StudyTableUI.render(words, order)
   
   4b. ì»¬ëŸ¼ í† ê¸€
       â””â”€> StudyTableUI.toggleColumn(columnType)
   
   4c. ì…€ í† ê¸€
       â””â”€> StudyTableUI.toggleCell(cell)
   
   4d. í´ë¦½ë³´ë“œ ë³µì‚¬
       â””â”€> ClipboardUtils.startLongPress(element, text)
       â””â”€> (500ms í›„) navigator.clipboard.writeText(text)
```

---

## ğŸ¨ CSS í´ë˜ìŠ¤ ëª…ì„¸

### ì£¼ìš” í´ë˜ìŠ¤

#### ë ˆì´ì•„ì›ƒ
- `.container`: ë©”ì¸ ì»¨í…Œì´ë„ˆ
- `.header`: í—¤ë” ì˜ì—­
- `.content`: ì½˜í…ì¸  ì˜ì—­

#### íŒŒì¼ ì„ íƒ
- `.file-selection`: íŒŒì¼ ì„ íƒ ì»¨í…Œì´ë„ˆ
- `.mode-selection`: ëª¨ë“œ ì„ íƒ ì˜ì—­
- `.mode-option`: ëª¨ë“œ ì˜µì…˜ (ì„ íƒ ì‹œ `.selected` ì¶”ê°€)
- `.file-list`: íŒŒì¼ ëª©ë¡
- `.file-item`: ê°œë³„ íŒŒì¼ ì•„ì´í…œ
- `.question-type-selection`: ë¬¸ì œ ìœ í˜• ì„ íƒ ì˜ì—­

#### í”Œë˜ì‹œì¹´ë“œ
- `.flashcard`: í”Œë˜ì‹œì¹´ë“œ ì»¨í…Œì´ë„ˆ
- `.card`: ì¹´ë“œ (height: 500px ê³ ì •)
- `.card-question`: ë¬¸ì œ ìœ í˜• ë¼ë²¨
- `.card-content`: ë¬¸ì œ ë‚´ìš© (48px)
- `.card-answer`: ì •ë‹µ ì˜ì—­
- `.card-answer.hidden`: ì •ë‹µ ìˆ¨ê¹€ ìƒíƒœ
- `.card-controls`: ë²„íŠ¼ ì˜ì—­
  - `.align-left`: ì™¼ìª½ ì •ë ¬
  - `.align-center`: ì¤‘ì•™ ì •ë ¬
  - `.align-right`: ì˜¤ë¥¸ìª½ ì •ë ¬
- `.progress-badge`: ì§„í–‰ë¥  ë°°ì§€ (ì¢Œìƒë‹¨)
- `.weight-badge`: ê°€ì¤‘ì¹˜ ë°°ì§€ (ìš°ìƒë‹¨)

#### ë²„íŠ¼
- `.btn`: ê¸°ë³¸ ë²„íŠ¼
- `.btn-primary`: ì£¼ìš” ë²„íŠ¼ (ê·¸ë¼ë°ì´ì…˜)
- `.btn-secondary`: ë³´ì¡° ë²„íŠ¼
- `.btn-icon`: ì•„ì´ì½˜ ë²„íŠ¼ (56x56px ì›í˜•)
- `.btn:disabled`: ë¹„í™œì„±í™” ë²„íŠ¼

#### í…Œì´ë¸”
- `.study-table`: ê³µë¶€í•˜ê¸° í…Œì´ë¸”
- `.statistics-detail-table`: í†µê³„ ìƒì„¸ í…Œì´ë¸”
- `.japanese-cell`: ì¼ë³¸ì–´ ì…€ (16px, bold)
- `.pronunciation-cell`: ë°œìŒ ì…€ (16px)
- `.meaning-cell`: ì˜ë¯¸ ì…€ (16px)
- `.sentence-cell`: ì˜ˆë¬¸ ì…€
- `.hidden-text`: ìˆ¨ê¹€ í…ìŠ¤íŠ¸ (íšŒìƒ‰ ë°°ê²½, "â€¢â€¢â€¢" í‘œì‹œ)

#### í†µê³„
- `.statistics-container`: í†µê³„ ì»¨í…Œì´ë„ˆ
- `.statistics-item`: í†µê³„ í•­ëª©
- `.statistics-item-row`: í†µê³„ í–‰ (min-height: 50px)
- `.statistics-label`: íŠ¸ë¼ì´ íšŸìˆ˜ ë¼ë²¨ (í´ë¦­ ê°€ëŠ¥)
- `.statistics-bar-container`: ë§‰ëŒ€ ê·¸ë˜í”„ ì»¨í…Œì´ë„ˆ
- `.statistics-bar`: ë§‰ëŒ€ (ê·¸ë¼ë°ì´ì…˜)
- `.statistics-detail-container`: ìƒì„¸ í…Œì´ë¸” ì»¨í…Œì´ë„ˆ
- `.statistics-detail-container.show`: í‘œì‹œ ìƒíƒœ

#### ë°˜ì‘í˜•
- `@media (max-width: 768px)`: ëª¨ë°”ì¼ (í…ìŠ¤íŠ¸ 14px)
- `@media (max-width: 480px)`: ì‘ì€ ëª¨ë°”ì¼ (í…ìŠ¤íŠ¸ 12px)

---

## ğŸ”§ ì„¤ì • ë° í™•ì¥

### ìƒˆë¡œìš´ ë¬¸ì œ ìœ í˜• ì¶”ê°€

1. **config.jsì— ë¬¸ì œ ìœ í˜• ì¶”ê°€**
```javascript
QUESTION_TYPES: {
  JAPANESE: 'japanese',
  MEANING: 'meaning',
  PRONUNCIATION: 'pronunciation',
  NEW_TYPE: 'new_type'  // ì¶”ê°€
}
```

2. **Question.js ìˆ˜ì •**
```javascript
getQuestion() {
  if (this.type === CONFIG.QUESTION_TYPES.NEW_TYPE) {
    return this.word.newProperty;
  }
  // ...
}
```

3. **FileSelectionUI.js ìˆ˜ì •**
- ì²´í¬ë°•ìŠ¤ ì˜µì…˜ ì¶”ê°€

### ìƒˆë¡œìš´ ë‹¨ì–´ ì†ì„± ì¶”ê°€

1. **Word.js ëª¨ë¸ í™•ì¥**
```javascript
constructor(data, fileName) {
  // ê¸°ì¡´ ì†ì„±...
  this.newProperty = data.newProperty || '';
}
```

2. **JSON ë°ì´í„° í˜•ì‹ ì—…ë°ì´íŠ¸**
```json
{
  "words": [
    {
      "id": 1,
      "japanese": "...",
      "newProperty": "..."
    }
  ]
}
```

### í†µê³„ ê³„ì‚° ë°©ì‹ ë³€ê²½

`StatisticsService.js`ì˜ `calculateStatistics()` ë©”ì„œë“œ ìˆ˜ì •

---

## ğŸ“Š ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

### ìµœì í™” í¬ì¸íŠ¸

1. **ê°€ì¤‘ì¹˜ ê³„ì‚° ìºì‹±**
   - `WeightService.getTotalWeight()`ëŠ” ë§¤ë²ˆ ê³„ì‚°í•˜ì§€ ì•Šê³  ë³€ê²½ ì‹œì—ë§Œ ì¬ê³„ì‚°

2. **DOM ì—…ë°ì´íŠ¸ ìµœì†Œí™”**
   - í…Œì´ë¸” ë Œë”ë§ ì‹œ innerHTML í•œ ë²ˆì— ì„¤ì •
   - ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€

3. **ì´ë²¤íŠ¸ ìœ„ì„**
   - í…Œì´ë¸” ì…€ì— ê°œë³„ ë¦¬ìŠ¤ë„ˆ ëŒ€ì‹  ë¶€ëª¨ì— ìœ„ì„ ê³ ë ¤

4. **ë©”ëª¨ë¦¬ ê´€ë¦¬**
   - íˆìŠ¤í† ë¦¬ ë¬´ì œí•œ ì¦ê°€ ë°©ì§€ (í•„ìš”ì‹œ ìµœëŒ€ í¬ê¸° ì œí•œ)

### ì„±ëŠ¥ ë©”íŠ¸ë¦­

- **ì´ˆê¸° ë¡œë“œ ì‹œê°„**: < 1ì´ˆ (ë‹¨ì–´ 1000ê°œ ê¸°ì¤€)
- **ë¬¸ì œ ì„ íƒ ì‹œê°„**: < 50ms
- **í…Œì´ë¸” ë Œë”ë§ ì‹œê°„**: < 200ms (ë‹¨ì–´ 500ê°œ ê¸°ì¤€)

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ëŒ€ìƒ

1. **Models**
   - Word.hasSentence()
   - Question.getQuestion()
   - Question.getAnswer()

2. **Services**
   - WeightService.increaseWeight()
   - WeightService.decreaseWeight()
   - StatisticsService.calculateStatistics()
   - SortUtils.fisherYatesShuffle()

3. **Managers**
   - HistoryManager.push/goBack/goForward
   - VoiceManager.initialize()

### í†µí•© í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

1. **í‰ê°€í•˜ê¸° ëª¨ë“œ ì „ì²´ í”Œë¡œìš°**
   - íŒŒì¼ ì„ íƒ â†’ ë¬¸ì œ í’€ê¸° â†’ ì •ë‹µ/ì˜¤ë‹µ â†’ í†µê³„ í™•ì¸

2. **ê³µë¶€í•˜ê¸° ëª¨ë“œ ì „ì²´ í”Œë¡œìš°**
   - íŒŒì¼ ì„ íƒ â†’ í…Œì´ë¸” í‘œì‹œ â†’ ì •ë ¬ â†’ í† ê¸€

3. **íˆìŠ¤í† ë¦¬ ë„¤ë¹„ê²Œì´ì…˜**
   - ë¬¸ì œ í’€ê¸° â†’ ë’¤ë¡œ â†’ ì•ìœ¼ë¡œ â†’ ë‹¤ì‹œ í’€ê¸°

### ì—£ì§€ ì¼€ì´ìŠ¤

- ë‹¨ì–´ê°€ 0ê°œì¸ íŒŒì¼
- ë§¤ìš° ë§ì€ ë‹¨ì–´ (1000ê°œ ì´ìƒ)
- ì˜ˆë¬¸ì´ ì—†ëŠ” ë‹¨ì–´
- ë°œìŒì´ ì—†ëŠ” ë‹¨ì–´
- ìŒì„± APIë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €

---

## ğŸ” ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

1. **XSS ë°©ì–´**
   - `escapeHtml()` í•¨ìˆ˜ë¡œ ì‚¬ìš©ì ì…ë ¥ ì´ìŠ¤ì¼€ì´í”„
   - `textContent` ì‚¬ìš© ê¶Œì¥

2. **CORS**
   - ë¡œì»¬ íŒŒì¼ ë¡œë“œ ì‹œ CORS ì •ì±… ì¤€ìˆ˜
   - ë¡œì»¬ ì„œë²„ í•„ìš”

3. **ë°ì´í„° ê²€ì¦**
   - JSON íŒŒì‹± ì‹œ try-catch
   - ë°ì´í„° íƒ€ì… ê²€ì¦

---

## ğŸ“ˆ í–¥í›„ ê°œì„  ì‚¬í•­

### ê¸°ëŠ¥
- [ ] í•™ìŠµ ì§„í–‰ë¥  ì €ì¥ (LocalStorage)
- [ ] ë¶ë§ˆí¬ ê¸°ëŠ¥
- [ ] ê²€ìƒ‰ ê¸°ëŠ¥
- [ ] ë‹¤í¬ ëª¨ë“œ
- [ ] í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
- [ ] ì˜¤ë””ì˜¤ íŒŒì¼ ì§€ì›

### ê¸°ìˆ 
- [ ] Service Worker (ì˜¤í”„ë¼ì¸ ì§€ì›)
- [ ] IndexedDB (ëŒ€ìš©ëŸ‰ ë°ì´í„°)
- [ ] Web Workers (ë¬´ê±°ìš´ ê³„ì‚°)
- [ ] TypeScript ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì¶”ê°€

### UI/UX
- [ ] ì• ë‹ˆë©”ì´ì…˜ ê°œì„ 
- [ ] ì ‘ê·¼ì„± í–¥ìƒ (ARIA)
- [ ] ë‹¤êµ­ì–´ ì§€ì›
- [ ] ì»¤ìŠ¤í…€ í…Œë§ˆ

---

## ğŸ“ ë¬¸ì„œ ìœ ì§€ë³´ìˆ˜

ì´ ë¬¸ì„œëŠ” ì½”ë“œ ë³€ê²½ ì‹œ í•¨ê»˜ ì—…ë°ì´íŠ¸ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-12-06  
**ë‹¤ìŒ ë¦¬ë·° ì˜ˆì •ì¼**: 2026-01-06

---

**ë¬¸ì„œ ë²„ì „**: 2.0.0  
**ì‘ì„±ì**: AI Assistant  
**ìƒíƒœ**: âœ… ì™„ë£Œ

