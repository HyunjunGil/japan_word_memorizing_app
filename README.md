# 일본어 단어장 (Japanese Wordbook)

일본어 단어 학습을 위한 웹 애플리케이션입니다. 플래시카드 방식의 평가 모드와 테이블 방식의 공부 모드를 제공하며, 가중치 기반 반복 학습 시스템을 구현하고 있습니다.

https://hyunjungil.github.io/japan_word_memorizing_app/

## 📋 목차

- [주요 기능](#주요-기능)
- [파일 구조](#파일-구조)
- [사용 방법](#사용-방법)
- [기술 스택](#기술-스택)
- [학습 시스템](#학습-시스템)
- [데이터 형식](#데이터-형식)

## ✨ 주요 기능

### 평가하기 모드 (유한 문제 방식)
- 각 단어당 2개의 문제 생성 (일본어 표기, 의미)
- **문제 유형 선택**: 학습 시작 전에 일본어 표기 문제와 의미 문제를 체크박스로 선택 가능 (기본값: 둘 다 선택)
- 가중치 기반 확률로 문제 선택: `(문제의 가중치) / (가중치의 합)`
- 정답 확인 후 다음: 가중치 +1 (최대 5)
- 정답 확인 없이 다음: 가중치 -1 (최소 0, 가중치가 0이면 문제 완료)
- 진행도 표시: 좌측 상단에 "진행도: A / B" 형태로 표시
- 완료 시 자동 이동: 모든 문제 완료 시 알람 없이 바로 처음 화면으로 이동
- **발음 듣기 기능**: 답 공개 후 발음 항목 옆에 듣기 버튼(▶)이 표시되어 발음을 들을 수 있습니다

### 공부하기 모드
- 테이블 형태로 모든 단어 표시
- ID, 재생, 일본어 표기, 발음, 의미, 예문 컬럼
- 스크롤 가능한 고정 헤더 (가로/세로 스크롤 지원)
- **예문 표시**: 단어 데이터에 `sent_jp`(일본어 예문)와 `sent_kr`(한국어 번역)가 있으면 예문 열에 표시됩니다
- **ID 정렬 기능**: ID 열 헤더를 클릭하면 정렬 순서가 변경됩니다 (오름차순 ↑ → 내림차순 ↓ → 랜덤 ↕ → 오름차순 ↑)
  - 정렬 시 각 텍스트의 보임/숨김 상태가 유지됩니다
- **발음 재생 기능**: 재생 버튼(▶)을 클릭하면 Web Speech API로 발음이 재생됩니다
  - Chrome 브라우저에서는 "Google 日本語" 고품질 음성 사용
  - 다른 브라우저에서는 OS 기본 일본어 음성 사용
  - 프록시 서버나 API 키 없이 바로 사용 가능
- **텍스트 보임/숨김**: 각 텍스트(일본어 표기, 발음, 의미, 예문)를 클릭하여 개별 보임/숨김 처리 가능
- **컬럼 전체 보임/숨김**: 컬럼 헤더 클릭 시 해당 컬럼 전체 보임/숨김 처리
- **클립보드 복사**: 각 칸을 길게 누르면(500ms 이상) 해당 내용이 클립보드에 자동 복사됩니다

### 공통 기능
- 반응형 디자인 (모바일 최적화, 가로 스크롤 지원)
- 스택 방식 히스토리 관리
- 버튼 정렬 선택 기능 (왼쪽/중앙/오른쪽)
- **발음 재생 기능**: Web Speech API를 사용한 일본어 발음 재생
- **자동 파일 로드**: `results/` 폴더의 모든 JSON 파일 자동 로드 (page_01~99, grammar_01~99)
- **알파벳순 정렬**: 단어묶음 목록이 파일명 기준 알파벳순으로 정렬됩니다

## 📁 파일 구조

```
japan_study/
├── japan_wordbook.html          # 실제 암기장 용도 (전체 단어셋 포함)
├── japan_wordbook_no_words.html # 코드 수정용 (DEFAULT_WORD_SETS 축소 버전)
├── results/                     # 단어 데이터 JSON 파일들
│   ├── page_01.json
│   ├── page_02.json
│   └── ...
├── results_tmp/                 # 임시 단어 데이터
├── word_init_script.py          # 단어 데이터 초기화 스크립트
├── apply_update_japan_wordbook.sh # 변경사항 자동 반영 스크립트
└── README.md                    # 이 파일
```

### 파일 설명

- **`japan_wordbook.html`**: 실제 암기장 용도로 사용하는 파일입니다. 전체 단어셋이 내장되어 있어 바로 사용할 수 있습니다.
- **`japan_wordbook_no_words.html`**: 코드 수정 및 테스트를 위해 `DEFAULT_WORD_SETS`를 작게 줄인 버전입니다. 개발 시 이 파일을 사용하면 로딩이 빠르고 수정이 용이합니다.

## 🚀 사용 방법

### 1. 기본 사용

1. `japan_wordbook.html` 파일을 브라우저에서 엽니다.
2. 학습 모드를 선택합니다:
   - **평가하기**: 플래시카드 방식으로 암기 테스트
   - **공부하기**: 테이블 형태로 모든 정보 확인
3. 단어묶음을 선택합니다 (평가하기는 다중 선택, 공부하기는 단일 선택).
4. "학습 시작" 버튼을 클릭합니다.


### 3. 평가하기 모드 사용법

1. **문제 유형 선택** (선택사항): 학습 시작 전에 "일본어 표기 문제"와 "의미 문제" 체크박스로 원하는 문제 유형을 선택합니다. 기본값은 둘 다 선택되어 있습니다.
2. 단어묶음을 선택하고 "학습 시작" 버튼을 클릭합니다.
3. 문제가 표시되면 정답을 생각해봅니다.
4. "?" 버튼을 클릭하여 정답을 확인합니다.
5. **발음 듣기**: 답 공개 후 발음 항목 옆에 표시되는 듣기 버튼(▶)을 클릭하면 발음을 들을 수 있습니다.
6. 정답 확인 후 "▶" 버튼을 클릭하면 가중치가 증가합니다.
7. 정답 확인 없이 "▶" 버튼을 클릭하면 가중치가 감소합니다.
8. "◀" 버튼으로 이전 문제로 돌아갈 수 있습니다.
9. 좌측 상단의 진행도를 확인하여 학습 진행 상황을 파악합니다.

### 4. 공부하기 모드 사용법

1. 공부하기 모드를 선택하고 단어묶음을 하나 선택합니다.
2. 테이블에서 모든 단어를 확인할 수 있습니다 (기본적으로 ID 오름차순으로 정렬).
3. **ID 정렬**: ID 열 헤더를 클릭하면 정렬 순서가 변경됩니다.
   - 오름차순 (↑): ID가 작은 순서부터
   - 내림차순 (↓): ID가 큰 순서부터
   - 랜덤 (↕): 무작위 순서
   - 정렬해도 각 텍스트의 보임/숨김 상태는 유지됩니다
4. **발음 재생**: 각 행의 재생 버튼(▶)을 클릭하면 해당 단어의 발음이 재생됩니다.
   - Chrome 브라우저에서는 "Google 日本語" 고품질 음성 사용
   - 다른 브라우저에서는 OS 기본 일본어 음성 사용
   - 인터넷 연결이 필요할 수 있습니다 (Chrome의 Google 음성은 클라우드 기반)
5. **텍스트 보임/숨김**: 각 텍스트(일본어 표기, 발음, 의미, 예문)를 클릭하여 개별적으로 보임/숨김 처리할 수 있습니다.
6. **컬럼 전체 보임/숨김**: 컬럼 헤더를 클릭하면 해당 컬럼 전체가 보임/숨김 처리됩니다.
7. **클립보드 복사**: 각 칸을 길게 누르면(500ms 이상) 해당 내용이 클립보드에 자동 복사됩니다. 복사 완료 시 "복사되었습니다!" 메시지가 표시됩니다.
8. **예문 확인**: 단어 데이터에 예문(`sent_jp`, `sent_kr`)이 있으면 예문 열에 일본어 예문과 한국어 번역이 함께 표시됩니다.
9. "평가하기로" 버튼을 클릭하여 평가하기 모드로 전환할 수 있습니다.

## 🛠 기술 스택

- **HTML5**: 단일 파일 구조
- **CSS3**: 반응형 디자인 (모바일 최적화)
- **JavaScript (Vanilla)**: 클라이언트 사이드 로직
- **세션 기반**: 페이지 새로고침 시 모든 데이터 초기화

## 📚 학습 시스템

### 가중치 기반 반복 학습 (SRS 유사)

- **평가하기 모드**: 각 문제별로 가중치 관리
  - 가중치 키 형식: `{fileName}_{wordId}_{questionType}`
  - 가중치 범위: 0 ~ 5
  - 가중치가 0이면 문제 완료로 간주 (선택 대상에서 제외)

- **공부하기 모드**: 각 단어별로 가중치 관리
  - 가중치 키 형식: `{fileName}_{wordId}`
  - 가중치 범위: 1 ~ 5

### 가중치 업데이트 규칙

**평가하기 모드:**
- 정답 확인 후 다음: +1 (최대 5)
- 정답 확인 없이 다음: -1 (최소 0)
- 이전 버튼: 가중치 변화 없음
- 이전에서 다음으로: 가중치 변화 없음

**공부하기 모드:**
- 항상 +1 (최대 5)

## 📊 데이터 형식

### 단어셋 (WordSet)

```json
{
  "fileName": "page_01",
  "words": [
    {
      "id": 1,
      "japanese": "改札",
      "pronunciation": "かいさつ",
      "meaning": "개찰",
      "sent_jp": "改札口を通る",
      "sent_kr": "개찰구를 통과하다"
    }
  ]
}
```

### 필드 설명

- `fileName`: 파일명 (고유 식별자)
- `id`: 단어 ID
- `japanese`: 일본어 표기
- `pronunciation`: 발음 (히라가나/가타카나)
- `meaning`: 한국어 의미
- `sent_jp`: 일본어 예문 (선택사항)
- `sent_kr`: 한국어 예문 번역 (선택사항)

## 📝 특징 및 제약사항

### 특징
- ✅ 가중치 기반 반복 학습 (SRS 유사, 세션 중에만 유지)
- ✅ 두 가지 학습 모드 제공
- ✅ 유한 문제 방식 (평가하기 모드)
- ✅ **문제 유형 선택**: 평가하기 모드에서 일본어 표기 문제와 의미 문제를 선택적으로 출제 가능
- ✅ 반응형 디자인 (모바일 최적화, 가로 스크롤 지원)
- ✅ 기본 단어셋 자동 로드 (`results/` 폴더의 모든 JSON 파일)
- ✅ 진행도 표시
- ✅ 완료 시 자동 이동
- ✅ **발음 재생 기능**: Web Speech API를 사용한 일본어 발음 재생 (Chrome에서 Google 일본어 음성 사용)
  - 평가하기 모드: 답 공개 후 발음 듣기 버튼 제공
  - 공부하기 모드: 각 행의 재생 버튼으로 발음 재생
- ✅ **ID 정렬 기능**: 공부하기 모드에서 ID 열 헤더 클릭 시 정렬 순서 변경 (오름차순 → 내림차순 → 랜덤 → 오름차순)
  - 정렬 시 각 텍스트의 보임/숨김 상태가 자동으로 유지됨
- ✅ **텍스트 보임/숨김 기능**: 공부하기 모드에서 각 텍스트를 클릭하여 개별 보임/숨김 처리 가능
- ✅ **컬럼 전체 보임/숨김**: 공부하기 모드에서 컬럼 헤더 클릭 시 해당 컬럼 전체 보임/숨김 처리
- ✅ **클립보드 복사 기능**: 공부하기 모드에서 각 칸을 길게 누르면 클립보드에 자동 복사
- ✅ **예문 표시 기능**: 공부하기 모드에서 단어 데이터에 예문이 있으면 예문 열에 일본어 예문과 한국어 번역 표시
- ✅ **알파벳순 정렬**: 단어묶음 목록이 파일명 기준 알파벳순으로 정렬

### 제약사항
- ⚠️ 단일 HTML 파일 구조 (코드 분리 없음)
- ⚠️ 서버 없이 동작 (클라이언트 사이드만)
- ⚠️ 가중치 범위: 평가하기 모드는 0~5, 공부하기 모드는 1~5 (고정)
- ⚠️ 공부하기 모드는 단일 파일만 선택 가능
- ⚠️ 발음 문제 유형 제외 (일본어 표기, 뜻 문제만 출제)
- ⚠️ 페이지 새로고침 시 모든 학습 데이터 초기화 (가중치, 히스토리 등)

## 🔧 개발

### 코드 수정 시

개발 및 코드 수정 시에는 `japan_wordbook_no_words.html` 파일을 사용하는 것을 권장합니다. 이 파일은 `DEFAULT_WORD_SETS`가 축소되어 있어 로딩이 빠르고 수정이 용이합니다.

### 변경사항 자동 반영

수정 완료 후 변경사항을 `japan_wordbook.html`에 자동으로 반영하려면 다음 스크립트를 실행하세요:

```bash
./apply_update_japan_wordbook.sh
```

이 스크립트는 다음 작업을 수행합니다:
1. `japan_wordbook_no_words.html`을 `japan_wordbook.html`로 복사
2. `word_init_script.py`를 실행하여 `results/` 폴더의 단어 데이터를 `japan_wordbook.html`에 초기화

수동으로 반영하려면:
1. `japan_wordbook_no_words.html`의 변경사항을 `japan_wordbook.html`에 복사
2. `python word_init_script.py japan_wordbook.html results` 명령 실행

## 📖 상세 명세

더 자세한 기술 명세는 [specification.md](.cursor/specification.md)를 참고하세요.

## 📄 라이선스

이 프로젝트는 개인 학습 목적으로 제작되었습니다.

