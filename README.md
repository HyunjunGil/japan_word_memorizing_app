# 일본어 단어장 (Japanese Wordbook)

일본어 단어 학습을 위한 웹 애플리케이션입니다. 플래시카드 방식의 평가 모드와 테이블 방식의 공부 모드를 제공하며, 가중치 기반 반복 학습 시스템을 구현하고 있습니다.

## 📋 목차

- [주요 기능](#주요-기능)
- [파일 구조](#파일-구조)
- [사용 방법](#사용-방법)
- [기술 스택](#기술-스택)
- [학습 시스템](#학습-시스템)
- [데이터 형식](#데이터-형식)

## ✨ 주요 기능

### 평가하기 모드 (유한 문제 방식)
- 각 단어당 2개의 문제 생성 (일본어 표기, 의미)
- 가중치 기반 확률로 문제 선택: `(문제의 가중치) / (가중치의 합)`
- 정답 확인 후 다음: 가중치 +1 (최대 5)
- 정답 확인 없이 다음: 가중치 -1 (최소 0, 가중치가 0이면 문제 완료)
- 진행도 표시: 좌측 상단에 "진행도: A / B" 형태로 표시
- 완료 시 자동 이동: 모든 문제 완료 시 알람 없이 바로 처음 화면으로 이동

### 공부하기 모드
- 테이블 형태로 모든 단어 표시
- ID, 일본어 표기, 발음, 의미 컬럼
- 스크롤 가능한 고정 헤더

### 공통 기능
- JSON 파일 업로드 지원
- 반응형 디자인 (모바일 최적화)
- 스택 방식 히스토리 관리
- 버튼 정렬 선택 기능 (왼쪽/중앙/오른쪽)

## 📁 파일 구조

```
japan_study/
├── japan_wordbook.html          # 실제 암기장 용도 (전체 단어셋 포함)
├── japan_wordbook_no_words.html # 코드 수정용 (DEFAULT_WORD_SETS 축소 버전)
├── results/                     # 단어 데이터 JSON 파일들
│   ├── page_01.json
│   ├── page_02.json
│   └── ...
├── results_tmp/                 # 임시 단어 데이터
├── word_init_script.py          # 단어 데이터 초기화 스크립트
├── apply_update_japan_wordbook.sh # 변경사항 자동 반영 스크립트
└── README.md                    # 이 파일
```

### 파일 설명

- **`japan_wordbook.html`**: 실제 암기장 용도로 사용하는 파일입니다. 전체 단어셋이 내장되어 있어 바로 사용할 수 있습니다.
- **`japan_wordbook_no_words.html`**: 코드 수정 및 테스트를 위해 `DEFAULT_WORD_SETS`를 작게 줄인 버전입니다. 개발 시 이 파일을 사용하면 로딩이 빠르고 수정이 용이합니다.

## 🚀 사용 방법

### 1. 기본 사용

1. `japan_wordbook.html` 파일을 브라우저에서 엽니다.
2. 학습 모드를 선택합니다:
   - **평가하기**: 플래시카드 방식으로 암기 테스트
   - **공부하기**: 테이블 형태로 모든 정보 확인
3. 단어묶음을 선택합니다 (평가하기는 다중 선택, 공부하기는 단일 선택).
4. "학습 시작" 버튼을 클릭합니다.

### 2. JSON 파일 업로드

1. 파일 선택 화면에서 "JSON 파일 업로드" 영역을 클릭합니다.
2. 단어 데이터가 포함된 JSON 파일을 선택합니다.
3. 파일 형식은 다음과 같아야 합니다:

```json
{
  "fileName": "page_01",
  "words": [
    {
      "id": 1,
      "japanese": "改札",
      "pronunciation": "かいさつ",
      "meaning": "개찰"
    }
  ]
}
```

### 3. 평가하기 모드 사용법

1. 문제가 표시되면 정답을 생각해봅니다.
2. "?" 버튼을 클릭하여 정답을 확인합니다.
3. 정답 확인 후 "▶" 버튼을 클릭하면 가중치가 증가합니다.
4. 정답 확인 없이 "▶" 버튼을 클릭하면 가중치가 감소합니다.
5. "◀" 버튼으로 이전 문제로 돌아갈 수 있습니다.
6. 좌측 상단의 진행도를 확인하여 학습 진행 상황을 파악합니다.

## 🛠 기술 스택

- **HTML5**: 단일 파일 구조
- **CSS3**: 반응형 디자인 (모바일 최적화)
- **JavaScript (Vanilla)**: 클라이언트 사이드 로직
- **세션 기반**: 페이지 새로고침 시 모든 데이터 초기화

## 📚 학습 시스템

### 가중치 기반 반복 학습 (SRS 유사)

- **평가하기 모드**: 각 문제별로 가중치 관리
  - 가중치 키 형식: `{fileName}_{wordId}_{questionType}`
  - 가중치 범위: 0 ~ 5
  - 가중치가 0이면 문제 완료로 간주 (선택 대상에서 제외)

- **공부하기 모드**: 각 단어별로 가중치 관리
  - 가중치 키 형식: `{fileName}_{wordId}`
  - 가중치 범위: 1 ~ 5

### 가중치 업데이트 규칙

**평가하기 모드:**
- 정답 확인 후 다음: +1 (최대 5)
- 정답 확인 없이 다음: -1 (최소 0)
- 이전 버튼: 가중치 변화 없음
- 이전에서 다음으로: 가중치 변화 없음

**공부하기 모드:**
- 항상 +1 (최대 5)

## 📊 데이터 형식

### 단어셋 (WordSet)

```json
{
  "fileName": "page_01",
  "words": [
    {
      "id": 1,
      "japanese": "改札",
      "pronunciation": "かいさつ",
      "meaning": "개찰"
    }
  ]
}
```

### 필드 설명

- `fileName`: 파일명 (고유 식별자)
- `id`: 단어 ID
- `japanese`: 일본어 표기
- `pronunciation`: 발음 (히라가나/가타카나)
- `meaning`: 한국어 의미

## 📝 특징 및 제약사항

### 특징
- ✅ 가중치 기반 반복 학습 (SRS 유사, 세션 중에만 유지)
- ✅ 두 가지 학습 모드 제공
- ✅ 유한 문제 방식 (평가하기 모드)
- ✅ 반응형 디자인 (모바일 최적화)
- ✅ 기본 단어셋 내장
- ✅ JSON 파일 업로드 지원
- ✅ 진행도 표시
- ✅ 완료 시 자동 이동

### 제약사항
- ⚠️ 단일 HTML 파일 구조 (코드 분리 없음)
- ⚠️ 서버 없이 동작 (클라이언트 사이드만)
- ⚠️ 가중치 범위: 평가하기 모드는 0~5, 공부하기 모드는 1~5 (고정)
- ⚠️ 공부하기 모드는 단일 파일만 선택 가능
- ⚠️ 발음 문제 유형 제외 (일본어 표기, 뜻 문제만 출제)
- ⚠️ 페이지 새로고침 시 모든 학습 데이터 초기화 (가중치, 히스토리 등)

## 🔧 개발

### 코드 수정 시

개발 및 코드 수정 시에는 `japan_wordbook_no_words.html` 파일을 사용하는 것을 권장합니다. 이 파일은 `DEFAULT_WORD_SETS`가 축소되어 있어 로딩이 빠르고 수정이 용이합니다.

### 변경사항 자동 반영

수정 완료 후 변경사항을 `japan_wordbook.html`에 자동으로 반영하려면 다음 스크립트를 실행하세요:

```bash
./apply_update_japan_wordbook.sh
```

이 스크립트는 다음 작업을 수행합니다:
1. `japan_wordbook_no_words.html`을 `japan_wordbook.html`로 복사
2. `word_init_script.py`를 실행하여 `results/` 폴더의 단어 데이터를 `japan_wordbook.html`에 초기화

수동으로 반영하려면:
1. `japan_wordbook_no_words.html`의 변경사항을 `japan_wordbook.html`에 복사
2. `python word_init_script.py japan_wordbook.html results` 명령 실행

## 📖 상세 명세

더 자세한 기술 명세는 [specification.md](.cursor/specification.md)를 참고하세요.

## 📄 라이선스

이 프로젝트는 개인 학습 목적으로 제작되었습니다.

